<html xmlns="http://www.w3.org/1999/xhtml"
     xmlns:tal="http://xml.zope.org/namespaces/tal">
<head></head>
<body>
    <div id="home_link">
        <p><a href="${app_url}">Back to home page</a></p>
    </div>
    <div tal:replace="structure toolbar" />
    <h1>${idea.title}</h1>
    <p>Tags: <ul class="tag-list"><li tal:repeat="tag idea.tags"><a href="${app_url}/tags/${tag.name}">${tag.name}</a></li></ul></p>
    <p>By <a href="${app_url}/users/${poster.username}">${poster.name}</a>.</p>
    <p>Hits: <b>${idea.hits}</b>.</p>
    <p>Misses: <b>${idea.misses}</b>.</p>
    <p tal:content="idea.text"></p>
    <div tal:condition="voted">
        <p>You already voted <b>${voted}</b> for this idea.</p>
    </div>
    <div tal:condition="voted is None and viewer_username">
    <form action="${app_url}/idea_vote" method="post">
        <input type="hidden" name="target" value="${idea.idea_id}" />
        <input type="submit" name="form.vote_hit" value="Hit" />
        <input type="submit" name="form.vote_miss" value="Miss" />
    </form>
    </div>
    <p><a href="${app_url}/idea_add?target=${idea.idea_id}">Add your comment.</a></p>
    <div tal:condition="comments">
    <h3>Comments</h3>
    <ul>
        <li tal:repeat="comment comments"><span class="tags"><a tal:repeat="tag comment.tags" href="${app_url}/tags/${tag.name}">${tag.name}</a></span> <a href="${app_url}/ideas/${comment.idea_id}">${comment.title}</a>, by ${comment.users.name} (+${comment.hits}, -${comment.misses}).</li>
    </ul>
    </div>
</body>
</html>
